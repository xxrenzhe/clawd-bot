---
title: "Moltbot PM2 Setup: Auto-Restart, Logs, Monitoring [2026]"
description: "Run Moltbot with PM2 for production-ready process management. Get auto-restart, log rotation, and real-time monitoring features."
pubDate: 2026-01-27
modifiedDate: 2026-01-29
category: "Tutorial"
tags: ["moltbot","clawdbot","pm2","process manager","nodejs","monitoring"]
keywords: ["moltbot pm2","clawdbot pm2 setup","pm2 node.js","process manager moltbot","moltbot auto-restart", "openclaw"]
readingTime: 6
featured: false
author: "Nora Blake"
image: "/images/articles/clawdbot-pm2-setup.jpg"
imageAlt: "Moltbot PM2 Setup"
articleType: "HowTo"
difficulty: "beginner"
sources:
  - "https://docs.molt.bot/"
  - "https://github.com/moltbot/moltbot"
relatedArticles:
  - "clawdbot-systemd-service"
  - "clawdbot-docker-setup"
  - "clawdbot-monitoring-setup"
---
import HostingCTA from '../../components/CTA/HostingCTA.astro';

# Moltbot PM2 Setup: Auto-Restart, Logs, Monitoring

![Moltbot PM2 Setup](/images/articles/clawdbot-pm2-setup.jpg)

## PM2 vs Alternatives

| Feature | PM2 | systemd | Docker |
|---------|-----|---------|--------|
| Auto-restart | Yes | Yes | Yes |
| Log management | Built-in | journald | Docker logs |
| Web dashboard | Yes (paid) | No | Portainer |
| Cluster mode | Yes | Manual | Swarm/K8s |
| Setup complexity | Low | Medium | Medium |

**Best for:** Node.js apps, quick setup, built-in monitoring.

<HostingCTA context="setup" />

## Prerequisites

| Requirement | Check |
|-------------|-------|
| Node.js 22+ | `node --version` |
| Moltbot installed | `moltbot --version` |
| npm | `npm --version` |

## Step 1: Install PM2

```bash
npm install -g pm2
```

Verify:
```bash
pm2 --version
```

<HostingCTA context="inline" />

## Step 2: Create PM2 Configuration

Create `ecosystem.config.js` in your home directory:

```bash
nano ~/ecosystem.config.js
```

Paste:
```javascript
module.exports = {
  apps: [{
    name: 'moltbot',
    script: 'moltbot',
    args: 'gateway',
    interpreter: 'none',
    cwd: process.env.HOME,
    env: {
      ANTHROPIC_API_KEY: 'sk-ant-your-key-here',
      NODE_ENV: 'production'
    },
    // Restart settings
    autorestart: true,
    max_restarts: 10,
    min_uptime: '10s',
    restart_delay: 5000,
    // Memory management
    max_memory_restart: '1G',
    // Logging
    log_date_format: 'YYYY-MM-DD HH:mm:ss',
    error_file: '~/.moltbot/logs/pm2-error.log',
    out_file: '~/.moltbot/logs/pm2-out.log',
    merge_logs: true,
    // Watch for config changes (optional)
    watch: false,
    ignore_watch: ['node_modules', 'logs']
  }]
};
```

## Step 3: Start Moltbot with PM2

```bash
pm2 start ~/ecosystem.config.js
```

Output:
```
[PM2] Starting /usr/local/bin/moltbot in fork_mode (1 instance)
[PM2] Done.
┌────┬────────────┬─────────────┬─────────┬─────────┬──────────┐
│ id │ name       │ namespace   │ version │ mode    │ pid      │
├────┼────────────┼─────────────┼─────────┼─────────┼──────────┤
│ 0  │ moltbot    │ default     │ N/A     │ fork    │ 12345    │
└────┴────────────┴─────────────┴─────────┴─────────┴──────────┘
```

## Step 4: Enable Startup on Boot

```bash
pm2 startup
```

This outputs a command — run it:
```bash
sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u $USER --hp $HOME
```

Save current process list:
```bash
pm2 save
```

Now Moltbot starts automatically on reboot.

## PM2 Commands

| Command | Description |
|---------|-------------|
| `pm2 list` | Show all processes |
| `pm2 logs moltbot` | View logs (live) |
| `pm2 logs moltbot --lines 100` | Last 100 lines |
| `pm2 restart moltbot` | Restart process |
| `pm2 stop moltbot` | Stop process |
| `pm2 delete moltbot` | Remove from PM2 |
| `pm2 monit` | Real-time monitoring |
| `pm2 info moltbot` | Detailed info |

## Monitoring

### Real-time Monitor

```bash
pm2 monit
```

Shows:
```
┌─────────────────────────────────────────────────────────────┐
│ moltbot                                          Mem: 156MB │
│ ↳ cpu: 2%  mem: 156MB  uptime: 3d 14h 22m                   │
└──────────────────────────────────────────��──────────────────┘
```

### Process Status

```bash
pm2 list
```

Output:
```
┌────┬────────────┬─────────┬─────────┬──────────┬────────┬──────┐
│ id │ name       │ status  │ restart │ uptime   │ cpu    │ mem  │
├────┼────────────┼─────────┼─────────┼──────────┼────────┼──────┤
│ 0  │ moltbot    │ online  │ 0       │ 3d       │ 0.5%   │ 156M │
└────┴────────────┴─────────┴─────────┴──────────┴────────┴──────┘
```

### Detailed Info

```bash
pm2 info moltbot
```

Shows:
- Status, uptime, restarts
- Memory, CPU usage
- Log file locations
- Environment variables

## Log Management

### View Logs

```bash
# All logs (live)
pm2 logs moltbot

# Error logs only
pm2 logs moltbot --err

# Last 200 lines
pm2 logs moltbot --lines 200
```

### Log Rotation

Install log rotate module:
```bash
pm2 install pm2-logrotate
```

Configure:
```bash
pm2 set pm2-logrotate:max_size 10M
pm2 set pm2-logrotate:retain 7
pm2 set pm2-logrotate:compress true
```

### Clear Logs

```bash
pm2 flush moltbot
```

## Environment Variables

### Secure API Keys

Option 1: In ecosystem.config.js (shown above)

Option 2: From shell environment
```bash
# Set in ~/.bashrc or ~/.zshrc
export ANTHROPIC_API_KEY="sk-ant-..."

# Then in ecosystem.config.js:
env: {
  ANTHROPIC_API_KEY: process.env.ANTHROPIC_API_KEY
}
```

Option 3: .env file
```bash
# Create .env file
echo "ANTHROPIC_API_KEY=sk-ant-..." > ~/.moltbot/.env

# In ecosystem.config.js:
const dotenv = require('dotenv');
dotenv.config({ path: '~/.moltbot/.env' });
```

## Advanced Configuration

### Memory Limits

Restart if memory exceeds limit:
```javascript
{
  max_memory_restart: '500M'  // or '1G'
}
```

### Graceful Restart

```javascript
{
  kill_timeout: 5000,  // Wait 5s for graceful shutdown
  listen_timeout: 3000,
  shutdown_with_message: true
}
```

### Cluster Mode (Multiple Instances)

For high availability:
```javascript
{
  instances: 2,  // or 'max' for all CPUs
  exec_mode: 'cluster'
}
```

Note: Moltbot may not support cluster mode — test first.

## Health Checks

### Basic Check

```bash
pm2 list | grep moltbot
```

### With Moltbot CLI

```bash
moltbot health
```

### Automated Health Check

Add to crontab:
```bash
*/5 * * * * pm2 list | grep -q "online" || pm2 restart moltbot
```

## PM2 Web Dashboard

### PM2 Plus (Cloud)

```bash
pm2 plus
```

Features: Alerts, metrics, remote management.

### PM2 Web (Self-hosted)

```bash
pm2 web
```

Access at `http://localhost:9615`

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Process keeps restarting | Check `pm2 logs moltbot --err` |
| "Command not found" | Use full path in `script` |
| Environment vars not loading | Check `pm2 info moltbot` |
| High memory usage | Set `max_memory_restart` |
| Logs not rotating | Install pm2-logrotate |

### Debug Mode

```bash
pm2 start ecosystem.config.js --env development
pm2 logs moltbot
```

### Reset Everything

```bash
pm2 delete moltbot
pm2 start ~/ecosystem.config.js
pm2 save
```

## PM2 vs systemd

| Use PM2 when... | Use systemd when... |
|-----------------|---------------------|
| Node.js-only deployment | Full system service |
| Need cluster mode | Native Linux service |
| Want PM2 monitoring | Using journald |
| Quick setup | Production server |

## Next Steps

- [systemd service setup](/articles/clawdbot-systemd-service)
- [Docker deployment](/articles/clawdbot-docker-setup)
- [Advanced monitoring](/articles/clawdbot-monitoring-setup)

<HostingCTA context="conclusion" />
