---
title: "Add RAG to Moltbot in 30 Minutes [2026 Tutorial]"
description: "Implement RAG with Moltbot. Vector stores, embeddings, document ingestion, semantic search, and retrieval-augmented generation setup."
pubDate: 2026-01-27
modifiedDate: 2026-01-29
category: "Advanced"
tags: ["moltbot","clawdbot","rag","retrieval","knowledge base","vector search"]
keywords: ["moltbot rag","clawdbot rag implementation","retrieval augmented generation","ai knowledge base","vector embeddings"]
readingTime: 9
featured: false
author: "Moltbot Team"
image: "/images/articles/clawdbot-rag-implementation.jpg"
imageAlt: "Moltbot RAG Implementation"
articleType: "TechArticle"
difficulty: "advanced"
sources:
  - "https://docs.molt.bot/"
  - "https://github.com/moltbot/moltbot"
relatedArticles:
  - "clawdbot-embeddings"
  - "clawdbot-database-integration"
  - "clawdbot-context-management"
---
import HostingCTA from '../../components/CTA/HostingCTA.astro';

# Add RAG to Moltbot in 30 Minutes

![Moltbot RAG Implementation](/images/articles/clawdbot-rag-implementation.jpg)

## RAG Overview

| Component | Purpose | Options |
|-----------|---------|---------|
| Embeddings | Convert text to vectors | OpenAI, Ollama, local |
| Vector Store | Store and search vectors | ChromaDB, Pinecone, pgvector |
| Retriever | Find relevant documents | Top-k, MMR, threshold |
| Generator | Create responses | Claude, GPT-4, Llama |

<HostingCTA context="setup" />

## Enable RAG

```json
{
  "agent": {
    "rag": {
      "enabled": true,
      "vectorStore": "chroma",
      "embeddings": "openai",
      "topK": 5,
      "minScore": 0.7
    }
  }
}
```

<HostingCTA context="inline" />

## Vector Store Setup

### ChromaDB (Local)

```bash
# Install ChromaDB
pip install chromadb

# Start server
chroma run --path ~/.moltbot/chroma
```

Configure Moltbot:
```json
{
  "agent": {
    "rag": {
      "vectorStore": {
        "type": "chroma",
        "path": "~/.moltbot/chroma",
        "collection": "documents"
      }
    }
  }
}
```

### Pinecone (Cloud)

```json
{
  "agent": {
    "rag": {
      "vectorStore": {
        "type": "pinecone",
        "apiKey": "${PINECONE_API_KEY}",
        "environment": "us-east-1",
        "index": "moltbot-docs"
      }
    }
  }
}
```

### PostgreSQL + pgvector

```json
{
  "agent": {
    "rag": {
      "vectorStore": {
        "type": "pgvector",
        "connectionString": "${DATABASE_URL}",
        "table": "embeddings"
      }
    }
  }
}
```

## Document Ingestion

### Add Documents

```bash
# Add single file
moltbot rag add ~/documents/manual.pdf

# Add directory
moltbot rag add ~/knowledge --recursive

# Add with metadata
moltbot rag add ~/docs/api.md --tags "api,reference" --source "internal"
```

### Supported Formats

| Format | Extension | Notes |
|--------|-----------|-------|
| Markdown | .md | Headers become sections |
| PDF | .pdf | OCR for scanned docs |
| Text | .txt | Plain text |
| HTML | .html | Stripped of tags |
| Code | .py, .js, etc | Language-aware chunking |
| DOCX | .docx | Microsoft Word |

### Chunking Strategies

```json
{
  "agent": {
    "rag": {
      "chunking": {
        "strategy": "semantic",
        "maxTokens": 512,
        "overlap": 50,
        "preserveHeaders": true
      }
    }
  }
}
```

Chunking options:
- `fixed`: Fixed token size
- `semantic`: Split at natural boundaries
- `recursive`: Hierarchical splitting
- `code`: Language-aware for source code

## Embeddings Configuration

### OpenAI

```json
{
  "agent": {
    "rag": {
      "embeddings": {
        "provider": "openai",
        "model": "text-embedding-3-small",
        "dimensions": 1536
      }
    }
  }
}
```

### Local with Ollama

```json
{
  "agent": {
    "rag": {
      "embeddings": {
        "provider": "ollama",
        "model": "nomic-embed-text",
        "host": "http://localhost:11434"
      }
    }
  }
}
```

### Cost Comparison

| Provider | Model | Cost per 1M tokens |
|----------|-------|-------------------|
| OpenAI | text-embedding-3-small | $0.02 |
| OpenAI | text-embedding-3-large | $0.13 |
| Ollama | nomic-embed-text | Free (local) |
| Cohere | embed-english-v3 | $0.10 |

## Retrieval Settings

### Basic Retrieval

```json
{
  "agent": {
    "rag": {
      "retrieval": {
        "topK": 5,
        "minScore": 0.7,
        "includeMetadata": true
      }
    }
  }
}
```

### Maximum Marginal Relevance (MMR)

Reduces redundancy in results:

```json
{
  "agent": {
    "rag": {
      "retrieval": {
        "method": "mmr",
        "topK": 10,
        "diversityFactor": 0.3
      }
    }
  }
}
```

### Hybrid Search

Combine semantic and keyword search:

```json
{
  "agent": {
    "rag": {
      "retrieval": {
        "method": "hybrid",
        "semantic": { "weight": 0.7 },
        "keyword": { "weight": 0.3 }
      }
    }
  }
}
```

## RAG Pipeline Flow

```
User Query
    â†“
[Embed Query] â†’ Vector representation
    â†“
[Search Vector Store] â†’ Top-k similar documents
    â†“
[Rerank Results] â†’ Sort by relevance
    â†“
[Build Context] â†’ Combine with system prompt
    â†“
[Generate Response] â†’ LLM creates answer
    â†“
[Return with Sources] â†’ Include citations
```

## Query with RAG

```
You: What's our refund policy?

Moltbot: Based on our documentation:

**Refund Policy Summary:**
- Full refund within 30 days of purchase
- Partial refund (50%) within 31-60 days
- No refunds after 60 days

Exceptions:
- Digital products are non-refundable once downloaded
- Custom orders require manager approval

ðŸ“š Sources:
- policies/refunds.md (section: General Policy)
- faq/billing.md (section: Refund Questions)
```

## Collection Management

### List Collections

```bash
moltbot rag collections list
```

### Create Collection

```bash
moltbot rag collections create product-docs --description "Product documentation"
```

### Query Specific Collection

```json
{
  "agent": {
    "rag": {
      "defaultCollection": "product-docs",
      "collections": {
        "product-docs": { "description": "Product documentation" },
        "support-kb": { "description": "Support knowledge base" }
      }
    }
  }
}
```

## RAG Statistics

```bash
moltbot rag stats
```

Output:
```
ðŸ“Š RAG Statistics

Collections: 3
â”œâ”€ product-docs: 1,234 chunks (45 documents)
â”œâ”€ support-kb: 567 chunks (23 documents)
â””â”€ internal: 890 chunks (12 documents)

Total:
â”œâ”€ Documents: 80
â”œâ”€ Chunks: 2,691
â”œâ”€ Embeddings: 2,691
â””â”€ Storage: 156 MB

Last updated: 2026-01-28 14:30
```

## Incremental Updates

### Watch Directory

```json
{
  "agent": {
    "rag": {
      "watch": {
        "enabled": true,
        "paths": ["~/docs"],
        "debounce": 5000
      }
    }
  }
}
```

### Manual Sync

```bash
# Update changed files only
moltbot rag sync

# Force full reindex
moltbot rag reindex --force
```

## Performance Optimization

### Caching

```json
{
  "agent": {
    "rag": {
      "cache": {
        "enabled": true,
        "queryCache": 1000,
        "embeddingCache": 5000,
        "ttl": 3600
      }
    }
  }
}
```

### Batch Processing

```bash
# Batch ingest for large document sets
moltbot rag add ~/large-docs --batch-size 100 --parallel 4
```

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Low relevance scores | Adjust chunking size |
| Missing documents | Check file format support |
| Slow queries | Add query caching |
| Outdated results | Enable watch mode |
| High token usage | Reduce topK value |

### Debug Queries

```bash
# Show retrieval details
moltbot rag query "refund policy" --debug

# Test without generation
moltbot rag search "refund policy" --limit 10
```

## Next Steps

- [Embeddings deep dive](/articles/clawdbot-embeddings)
- [Database integration](/articles/clawdbot-database-integration)
- [Context management](/articles/clawdbot-context-management)

<HostingCTA context="conclusion" />
